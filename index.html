<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dimensional Permit | Magic Edition</title>
    
    <!-- 字体引入 -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            /* --- 核心魔法色彩库 --- */
            --neon-blue: #00f3ff;
            --neon-purple: #bc13fe;
            --neon-pink: #ff0055;
            --neon-yellow: #ffee00;
            --neon-green: #00ff9d;
            --neon-orange: #ff9a00;
            
            --hud-bg: rgba(12, 12, 18, 0.85);
            --font-title: 'Orbitron', sans-serif;
            --font-mono: 'Share Tech Mono', monospace;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; }

        body {
            background-color: #05000a;
            color: var(--neon-blue);
            font-family: var(--font-mono);
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1200px; /* 增强透视感 */
            cursor: crosshair;
        }

        /* --- 背景层：魔法星空 --- */
        #warp-canvas { 
            position: fixed; top: 0; left: 0; 
            z-index: 0; 
            width: 100%; height: 100%;
        }
        
        /* 动态魔法迷雾 */
        .nebula-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 50%, rgba(188, 19, 254, 0.1), transparent 70%);
            animation: nebulaPulse 8s ease-in-out infinite alternate;
            z-index: 1; pointer-events: none;
        }
        
        /* 暗角与扫描线 */
        .vignette {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 40%, #000 100%);
            z-index: 2; pointer-events: none;
        }
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2));
            background-size: 100% 3px;
            z-index: 3; pointer-events: none; opacity: 0.2;
        }

        /* --- 卡片容器 --- */
        .card-wrapper {
            position: relative;
            width: 800px; /* 稍微加宽以容纳更多按钮 */
            max-width: 95%;
            padding: 2px;
            z-index: 100;
            border-radius: 15px;
            transform-style: preserve-3d;
            transition: transform 0.1s ease-out; 
            /* 异形剪裁 */
            clip-path: polygon(
                25px 0, 100% 0, 
                100% calc(100% - 35px), calc(100% - 35px) 100%, 
                65px 100%, 0 calc(100% - 65px), 0 25px
            );
        }

        /* 彩虹流光边框 */
        .card-wrapper::before {
            content: '';
            position: absolute;
            top: -50%; left: -50%; width: 200%; height: 200%;
            background: conic-gradient(
                transparent, var(--neon-blue), var(--neon-purple), 
                var(--neon-pink), var(--neon-orange), var(--neon-yellow), 
                var(--neon-green), var(--neon-blue), transparent
            );
            animation: borderRotate 3s linear infinite;
            z-index: -1;
        }

        /* --- 全息卡片本体 --- */
        .holo-card {
            background: var(--hud-bg);
            backdrop-filter: blur(16px);
            width: 100%; height: 100%;
            clip-path: polygon(
                25px 0, 100% 0, 
                100% calc(100% - 35px), calc(100% - 35px) 100%, 
                65px 100%, 0 calc(100% - 65px), 0 25px
            );
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .card-inner {
            padding: 35px 45px;
            background: 
                linear-gradient(90deg, rgba(188,19,254,0.03) 1px, transparent 1px) 0 0 / 30px 30px,
                linear-gradient(rgba(188,19,254,0.03) 1px, transparent 1px) 0 0 / 30px 30px;
        }

        /* --- 头部 --- */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            border-bottom: 2px solid rgba(188,19,254,0.3);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .sys-title {
            font-family: var(--font-title);
            font-size: 1.8rem;
            font-weight: 900;
            background: linear-gradient(to right, #fff, var(--neon-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(0,243,255,0.3);
        }

        .sys-badge {
            background: rgba(0, 243, 255, 0.1); 
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 6px 12px; 
            font-weight: bold; 
            font-size: 0.7rem;
            cursor: pointer !important;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .sys-badge:hover {
            background: var(--neon-blue); color: #000;
            box-shadow: 0 0 15px var(--neon-blue);
        }

        /* --- 无人机 (魔法球形态) --- */
        .drone-unit {
            position: absolute; right: 30px; top: -40px;
            width: 80px; height: 80px;
            z-index: 50;
            animation: float 5s ease-in-out infinite;
            pointer-events: none;
        }
        .drone-core {
            width: 100%; height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #fff, var(--neon-purple), #000);
            box-shadow: 0 0 30px var(--neon-purple);
            position: relative;
        }
        .drone-ring {
            position: absolute; top: 50%; left: 50%;
            width: 160%; height: 160%;
            border: 2px solid var(--neon-blue);
            border-radius: 50%;
            transform: translate(-50%, -50%) rotateX(70deg);
            animation: spinRing 4s linear infinite;
            border-left-color: transparent;
            border-right-color: transparent;
        }

        /* --- 数据行 --- */
        .row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px 15px; margin-bottom: 8px;
            background: linear-gradient(90deg, rgba(255,255,255,0.03), transparent);
            border-left: 3px solid var(--neon-purple);
            transition: 0.3s;
        }
        .row:hover {
            background: linear-gradient(90deg, rgba(188,19,254,0.15), transparent);
            border-left-color: var(--neon-green);
            padding-left: 25px; /* 悬停位移增强 */
            transform: translateX(5px);
        }
        .label { color: #aaa; font-size: 0.75rem; letter-spacing: 2px; text-transform: uppercase;}
        .val { font-family: var(--font-title); font-size: 1rem; color: #fff; text-shadow: 0 0 5px var(--neon-blue); }

        /* --- 按钮组 (重点修改) --- */
        .action-grid {
            display: grid; 
            /* PC端一行4个 */
            grid-template-columns: repeat(4, 1fr); 
            gap: 12px;
            margin-top: 30px;
        }

        .btn {
            position: relative;
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.2);
            color: #ccc;
            padding: 12px 5px;
            font-family: var(--font-mono);
            text-transform: uppercase;
            font-size: 0.75rem;
            font-weight: bold;
            overflow: hidden;
            transition: 0.3s;
            text-decoration: none;
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            gap: 5px;
            cursor: pointer !important;
            min-height: 70px; /* 增加高度容纳图标 */
        }
        
        .btn i { font-size: 1.2rem; margin-bottom: 3px; transition: 0.3s; }

        /* 按钮悬停特效 */
        .btn::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: translateX(-100%); transition: 0.5s;
        }
        .btn:hover::before { transform: translateX(100%); }

        /* 1. GitHub - 紫色 */
        .btn-github:hover { border-color: var(--neon-purple); color: var(--neon-purple); box-shadow: 0 0 15px rgba(188,19,254,0.3); }
        
        /* 2. Email - 黄色 */
        .btn-email:hover { border-color: var(--neon-yellow); color: var(--neon-yellow); box-shadow: 0 0 15px rgba(255,238,0,0.3); }

        /* 3. Enter - 蓝色 (主按钮) */
        .btn-enter { border: 1px solid var(--neon-blue); color: var(--neon-blue); background: rgba(0,243,255,0.05); }
        .btn-enter:hover { background: var(--neon-blue); color: #000; box-shadow: 0 0 25px var(--neon-blue); }
        
        /* 4. Danger - 红色 */
        .btn-danger:hover { border-color: var(--neon-pink); color: var(--neon-pink); box-shadow: 0 0 15px rgba(255,0,85,0.4); }

        /* --- 爆炸特效 --- */
        .particle { position: absolute; pointer-events: none; border-radius: 50%; mix-blend-mode: screen; }
        .shockwave {
            position: absolute; pointer-events: none; border-radius: 50%;
            border: 2px solid #fff;
            transform: translate(-50%, -50%);
            animation: shockwaveAnim 0.8s ease-out forwards;
        }

        /* 动画定义 */
        @keyframes borderRotate { 100% { transform: rotate(360deg); } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        @keyframes spinRing { 100% { transform: translate(-50%, -50%) rotateX(70deg) rotateZ(360deg); } }
        @keyframes shockwaveAnim { 0% { width: 0; height: 0; opacity: 1; border-width: 10px; border-color: var(--neon-pink); } 100% { width: 500px; height: 500px; opacity: 0; border-width: 0; } }
        @keyframes nebulaPulse { 0% { opacity: 0.3; transform: scale(1); } 100% { opacity: 0.6; transform: scale(1.1); } }

        /* 移动端适配 */
        @media (max-width: 768px) {
            .card-wrapper { width: 92%; }
            /* 移动端变两行 */
            .action-grid { grid-template-columns: 1fr 1fr; gap: 10px; }
            .sys-title { font-size: 1.4rem; }
            .drone-unit { transform: scale(0.7); top: -30px; right: -10px; }
        }
    </style>
</head>
<body>

    <!-- 背景魔法 -->
    <div class="nebula-overlay"></div>
    <canvas id="warp-canvas"></canvas>
    <div class="vignette"></div>
    <div class="scanlines"></div>

    <!-- 3D 容器 -->
    <div class="card-wrapper" id="tiltCard">
        
        <!-- 魔法球装饰 -->
        <div class="drone-unit">
            <div class="drone-ring"></div>
            <div class="drone-core"></div>
        </div>

        <div class="holo-card">
            <div class="card-inner">
                <div class="header">
                    <div class="sys-title-box">
                        <div class="sys-title">MAGIC PERMIT</div>
                        <div style="color: #888; letter-spacing: 2px; font-size: 0.6rem; margin-top: 5px;">
                            DIMENSION ID: <span id="dimId" style="color:var(--neon-yellow)">Unknown</span> // <span id="timeVal">00:00:00</span>
                        </div>
                    </div>
                    <div class="sys-badge" id="langBtn">EN / 中文</div>
                </div>

                <div class="data-grid">
                    <div class="row">
                        <span class="label" data-key="target">LANDING ZONE</span>
                        <span class="val scramble-text" id="domainVal" style="color: var(--neon-green)">SCANNING...</span>
                    </div>
                    <div class="row">
                        <span class="label" data-key="admin">REALM LORD</span>
                        <span class="val" id="adminVal" style="color: var(--neon-purple)">WIZARD_01</span>
                    </div>
                    <div class="row">
                        <span class="label" data-key="status">MANA LEVEL</span>
                        <span class="val" style="color: var(--neon-blue)">OVERFLOWING</span>
                    </div>
                    <div class="row" style="border-left-color: var(--neon-orange)">
                        <span class="label" data-key="icp">RUNE ID</span>
                        <span class="val" id="icpVal">LOADING...</span>
                    </div>
                </div>

                <!-- 按钮组：增加 Github 和 Email -->
                <div class="action-grid">
                    <!-- 1. GitHub -->
                    <a href="#" target="_blank" id="githubBtn" class="btn btn-github">
                        <i class="fab fa-github"></i> 
                        <span data-key="btn_github">CODE BASE</span>
                    </a>
                    
                    <!-- 2. Email (点击复制) -->
                    <button class="btn btn-email" id="emailBtn">
                        <i class="fas fa-envelope"></i> 
                        <span data-key="btn_email" id="emailText">SUMMON ME</span>
                    </button>

                    <!-- 3. 主跳转 -->
                    <a href="#" id="enterBtn" class="btn btn-enter">
                        <i class="fas fa-rocket"></i> 
                        <span data-key="btn_enter">WARP JUMP</span>
                    </a>

                    <!-- 4. 自毁/自检 -->
                    <button class="btn btn-danger" id="verifyBtn">
                        <i class="fas fa-skull"></i> 
                        <span data-key="btn_verify">DO NOT PUSH</span>
                    </button>
                </div>
                
                <div style="text-align: center; margin-top: 25px; opacity: 0.5; font-size: 0.6rem; letter-spacing: 3px;">
                    // CAST SPELL AT YOUR OWN RISK //
                </div>
            </div>
        </div>
    </div>

    <script>
        /* ==========================================
           0. 用户配置 (User Config)
           ========================================== */
        const USER_CONFIG = {
            githubUrl: "https://github.com/your-username", // 替换你的GitHub
            email: "wizard@dimension.com",                 // 替换你的邮箱
            defaultDomain: "UNCHARTED.REALM"               // 本地测试时显示的域名
        };

        /* ==========================================
           1. 魔法星空背景 (Magic Starfield)
           ========================================== */
        const canvas = document.getElementById('warp-canvas');
        const ctx = canvas.getContext('2d');
        let width, height, stars = [];
        let warpSpeed = 0;
        
        // 魔法色盘
        const MAGIC_COLORS = ['#00f3ff', '#bc13fe', '#ff0055', '#ffee00', '#00ff9d'];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            initStars();
        }

        class Star {
            constructor() { this.init(); }
            init() {
                this.x = (Math.random() - 0.5) * width;
                this.y = (Math.random() - 0.5) * height;
                this.z = Math.random() * width;
                this.color = MAGIC_COLORS[Math.floor(Math.random() * MAGIC_COLORS.length)];
                this.size = Math.random();
            }
            update() {
                this.z -= (2 + warpSpeed); // 基础速度2
                if (this.z <= 0) this.init();
            }
            draw() {
                let sx = (this.x / this.z) * width + width/2;
                let sy = (this.y / this.z) * height + height/2;
                let r = (width - this.z) * 0.002 * this.size;
                let opacity = 1 - (this.z / width);

                ctx.beginPath();
                ctx.fillStyle = this.color;
                ctx.globalAlpha = opacity;
                
                // 加速时的拉丝效果
                if (warpSpeed > 5) {
                    let tail = warpSpeed * 3;
                    let oldX = (this.x / (this.z + tail)) * width + width/2;
                    let oldY = (this.y / (this.z + tail)) * height + height/2;
                    ctx.strokeStyle = this.color;
                    ctx.lineWidth = r;
                    ctx.moveTo(oldX, oldY);
                    ctx.lineTo(sx, sy);
                    ctx.stroke();
                } else {
                    ctx.arc(sx, sy, r > 0 ? r : 0, 0, Math.PI * 2);
                    ctx.fill();
                }
                ctx.globalAlpha = 1.0;
            }
        }

        function initStars() {
            stars = [];
            for(let i=0; i<600; i++) stars.push(new Star());
        }

        function animateBg() {
            ctx.fillStyle = 'rgba(5, 0, 10, 0.3)'; // 拖尾颜色更深，偏紫
            ctx.fillRect(0, 0, width, height);
            stars.forEach(s => { s.update(); s.draw(); });
            if (warpSpeed > 0) warpSpeed *= 0.95;
            requestAnimationFrame(animateBg);
        }

        window.addEventListener('resize', resize);
        resize();
        animateBg();

        /* ==========================================
           2. 交互逻辑 (Interaction)
           ========================================== */
        // 点击页面加速
        document.addEventListener('mousedown', (e) => {
            if(e.target.closest('.btn')) return; // 点击按钮不加速
            warpSpeed = 40;
            createShockwave(e.clientX, e.clientY);
            createExplosion(e.clientX, e.clientY);
        });

        function createShockwave(x, y) {
            const wave = document.createElement('div');
            wave.classList.add('shockwave');
            wave.style.left = x + 'px'; wave.style.top = y + 'px';
            document.body.appendChild(wave);
            setTimeout(() => wave.remove(), 800);
        }

        function createExplosion(x, y) {
            for (let i = 0; i < 15; i++) {
                const p = document.createElement('div');
                p.classList.add('particle');
                document.body.appendChild(p);
                
                const color = MAGIC_COLORS[Math.floor(Math.random() * MAGIC_COLORS.length)];
                const size = Math.random() * 5 + 2;
                p.style.width = size+'px'; p.style.height = size+'px';
                p.style.background = color;
                p.style.boxShadow = `0 0 10px ${color}`;
                p.style.left = x+'px'; p.style.top = y+'px';

                const angle = Math.random() * Math.PI * 2;
                const v = 80 + Math.random() * 100;
                
                p.animate([
                    { transform: 'translate(0,0)', opacity: 1 },
                    { transform: `translate(${Math.cos(angle)*v}px, ${Math.sin(angle)*v}px)`, opacity: 0 }
                ], { duration: 600, fill: 'forwards' });
                
                setTimeout(() => p.remove(), 600);
            }
        }

        // 3D 卡片倾斜
        const card = document.getElementById('tiltCard');
        document.addEventListener('mousemove', (e) => {
            const x = (window.innerWidth/2 - e.pageX) / 25;
            const y = (window.innerHeight/2 - e.pageY) / 25;
            card.style.transform = `rotateY(${x}deg) rotateX(${y}deg)`;
        });

        /* ==========================================
           3. 业务逻辑 (幽默风趣版)
           ========================================== */
        // 乱码特效类
        class TextScramble {
            constructor(el) { this.el = el; this.chars = '!<>-_\\/[]{}—=+*^?#'; }
            setText(newText) {
                const oldText = this.el.innerText;
                const length = Math.max(oldText.length, newText.length);
                const promise = new Promise(resolve => this.resolve = resolve);
                this.queue = [];
                for (let i = 0; i < length; i++) {
                    const from = oldText[i] || '';
                    const to = newText[i] || '';
                    this.queue.push({ from, to, start: Math.random()*30, end: Math.random()*30 + 30 });
                }
                cancelAnimationFrame(this.frameRequest);
                this.frame = 0;
                this.update();
                return promise;
            }
            update() {
                let output = '';
                let complete = 0;
                for (let i = 0; i < this.queue.length; i++) {
                    let { from, to, start, end, char } = this.queue[i];
                    if (this.frame >= end) { complete++; output += to; }
                    else if (this.frame >= start) {
                        if (!char || Math.random() < 0.3) char = this.chars[Math.floor(Math.random() * this.chars.length)];
                        this.queue[i].char = char;
                        output += `<span style="color:#555">${char}</span>`;
                    } else output += from;
                }
                this.el.innerHTML = output;
                if (complete === this.queue.length) this.resolve();
                else { this.frameRequest = requestAnimationFrame(this.update.bind(this)); this.frame++; }
            }
        }

        // 幽默字典
        const dictionary = {
            en: {
                target: "CRASH SITE",
                admin: "REALM LORD",
                status: "MANA LEVEL",
                icp: "RUNE ID",
                btn_github: "SPELL BOOK",
                btn_email: "SUMMON ME",
                btn_enter: "WARP JUMP",
                btn_verify: "DO NOT PUSH"
            },
            zh: {
                target: "坠落坐标",
                admin: "位面之主",
                status: "魔力浓度",
                icp: "符文契约",
                btn_github: "藏经阁",
                btn_email: "传音入密",
                btn_enter: "原地飞升",
                btn_verify: "自毁程序"
            }
        };

        let currentLang = 'en';
        const domainScrambler = new TextScramble(document.getElementById('domainVal'));
        const adminScrambler = new TextScramble(document.getElementById('adminVal'));

        function initUI() {
            // 1. 绑定 Github
            document.getElementById('githubBtn').href = USER_CONFIG.githubUrl;
            
            // 2. 域名获取
            let domain = window.location.hostname.toUpperCase().replace('WWW.','');
            if(!domain) domain = USER_CONFIG.defaultDomain;
            
            // 3. ICP 日期生成
            const now = new Date();
            const icp = `RUNE-${now.getFullYear()}${String(now.getMonth()+1).padStart(2,'0')}`;
            
            // 4. 随机 ID
            document.getElementById('dimId').innerText = Math.floor(Math.random()*9999);

            updateText(domain, icp);
        }

        function updateText(domain, icp) {
            const t = dictionary[currentLang];
            document.querySelectorAll('[data-key]').forEach(el => el.innerText = t[el.dataset.key]);
            
            domainScrambler.setText(domain);
            document.getElementById('icpVal').innerText = icp;
            adminScrambler.setText(currentLang === 'en' ? "ARCH-MAGE" : "首席大法师");

            // 链接参数处理
            const p = new URLSearchParams(window.location.search);
            document.getElementById('enterBtn').href = p.get('target') || '#';
        }

        // 语言切换
        document.getElementById('langBtn').addEventListener('click', (e) => {
            e.stopPropagation();
            currentLang = currentLang === 'en' ? 'zh' : 'en';
            const t = dictionary[currentLang];
            
            // 刷新文字
            initUI(); 
            
            // 按钮本身特效
            const btn = e.target;
            btn.style.boxShadow = "0 0 20px var(--neon-blue)";
            setTimeout(() => btn.style.boxShadow = "", 300);
        });

        // 邮箱复制逻辑
        document.getElementById('emailBtn').addEventListener('click', function(e) {
            e.stopPropagation();
            e.preventDefault();
            
            navigator.clipboard.writeText(USER_CONFIG.email).then(() => {
                const span = this.querySelector('span');
                const originalText = span.innerText;
                const icon = this.querySelector('i');
                
                // 视觉反馈
                icon.className = "fas fa-check";
                span.innerText = currentLang === 'en' ? "COPIED!" : "已复制!";
                this.style.borderColor = "var(--neon-green)";
                this.style.color = "var(--neon-green)";
                
                createExplosion(e.clientX, e.clientY); // 复制成功放个烟花

                setTimeout(() => {
                    icon.className = "fas fa-envelope";
                    span.innerText = originalText;
                    this.style = ""; // Reset style
                }, 2000);
            });
        });

        // 自毁按钮逻辑
        document.getElementById('verifyBtn').addEventListener('click', function(e) {
            e.stopPropagation();
            const originalHTML = this.innerHTML;
            
            this.innerHTML = `<i class="fas fa-bomb fa-spin"></i> ${currentLang==='en'?'RUNNING...':'快跑...'}`;
            this.style.borderColor = "var(--neon-pink)";
            this.style.color = "var(--neon-pink)";
            
            // 模拟剧烈震动
            document.body.style.transform = "translateX(5px)";
            setTimeout(() => document.body.style.transform = "translateX(-5px)", 50);
            setTimeout(() => document.body.style.transform = "translateX(5px)", 100);
            setTimeout(() => document.body.style.transform = "translate(0)", 150);

            setTimeout(() => {
                this.innerHTML = `<i class="fas fa-exclamation-triangle"></i> ${currentLang==='en'?'FAILED':'失败'}`;
                setTimeout(() => {
                    this.innerHTML = originalHTML;
                    this.style = "";
                }, 1500);
            }, 1200);
        });

        // 时间刷新
        setInterval(() => document.getElementById('timeVal').innerText = new Date().toLocaleTimeString(), 1000);
        
        // 启动
        setTimeout(initUI, 200);

    </script>
</body>
</html>
